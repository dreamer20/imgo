(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,a,t){e.exports=t(27)},19:function(e,a,t){},22:function(e,a,t){},27:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),i=t(13),r=t.n(i),l=(t(19),t(9)),o=t(2),c=t(3),h=t(5),m=t(4),d=t(6),u=t(1),g=t(8),p=t.n(g),v=(t(22),t(7)),b=t.n(v),f=(t(12),t(24),t(26),function(e){function a(){return Object(o.a)(this,a),Object(h.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"navbar navbar-expand-lg navbar-dark bg-primary fixed-top"},s.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavContent"},s.a.createElement("span",{className:"navbar-toggler-icon"})),s.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavContent"},this.props.children))}}]),a}(n.Component)),O=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(m.a)(a).call(this,e))).handleChangeInput=t.handleChangeInput.bind(Object(u.a)(Object(u.a)(t))),t.handleSearchSubmit=t.handleSearchSubmit.bind(Object(u.a)(Object(u.a)(t))),t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"handleChangeInput",value:function(e){this.props.handleChange(this.props.paramName,e.target.value)}},{key:"handleSearchSubmit",value:function(e){e.preventDefault(),this.props.handleSearch()}},{key:"render",value:function(){return s.a.createElement("form",{className:"form-inline mt-2"},s.a.createElement("input",{type:"search",className:"form-control mr-2 mb-2",value:this.props.val,placeholder:"\u041f\u043e\u0438\u0441\u043a","aria-label":"\u041f\u043e\u0438\u0441\u043a",onChange:this.handleChangeInput}),s.a.createElement("button",{className:"btn btn-outline-light mb-2",onClick:this.handleSearchSubmit},"\u041f\u043e\u0438\u0441\u043a"))}}]),a}(n.Component),w=function(e){function a(){return Object(o.a)(this,a),Object(h.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this,a=this.props.dropdownTitles.map(function(a,t){return s.a.createElement("li",{key:t,className:"nav-item dropdown"},s.a.createElement("a",{href:"#",className:"nav-link dropdown-toggle","data-toggle":"dropdown"},a),e.props.children[t])});return s.a.createElement("ul",{className:"navbar-nav mr-auto"},a)}}]),a}(n.Component),j=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(m.a)(a).call(this,e))).handleChange=t.handleChange.bind(Object(u.a)(Object(u.a)(t))),t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"handleChange",value:function(e){this.props.handleChange(this.props.paramName,e)}},{key:"render",value:function(){var e,a=[];for(var t in this.props.items)this.props.items.hasOwnProperty(t)&&(e=this.props.val===t?"dropdown-item checked":"dropdown-item",a.push(s.a.createElement("button",{onClick:this.handleChange.bind(this,t),key:this.props.items[t],className:e},this.props.items[t])));return s.a.createElement("div",{className:"dropdown-menu"},a)}}]),a}(n.Component),y=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(m.a)(a).call(this,e))).handleChange=t.handleChange.bind(Object(u.a)(Object(u.a)(t))),t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"handleChange",value:function(e){this.props.handleChange(this.props.paramName,e.target.checked)}},{key:"render",value:function(){return s.a.createElement("div",{className:"custom-control custom-checkbox mr-2"},s.a.createElement("input",{onChange:this.handleChange,checked:this.props.val,type:"checkbox",className:"custom-control-input",id:this.props._id}),s.a.createElement("label",{className:"custom-control-label text-light",title:this.props.hint,htmlFor:this.props._id},this.props.text))}}]),a}(n.Component),I=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(m.a)(a).call(this,e))).handleImageLoad=t.handleImageLoad.bind(Object(u.a)(Object(u.a)(t))),t.handleImageReview=t.handleImageReview.bind(Object(u.a)(Object(u.a)(t))),t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"handleImageLoad",value:function(e){this.props.handleImageLoad(this.props.index,e.target.width,e.target.height,!0)}},{key:"handleImageReview",value:function(e){e.preventDefault(),this.props.handleImageReview(this.props.reviewURL,this.props.imageData)}},{key:"render",value:function(){var e=this.props.height?this.props.height:"",a=this.props.width?this.props.width:"",t=this.props.isVisible?"block":"none";return s.a.createElement("div",{className:"img-box",style:{display:t}},s.a.createElement("a",{href:this.props.reviewURL,onClick:this.handleImageReview,className:"img-ref"},s.a.createElement("img",{style:{height:e,width:a},className:"img",src:this.props.url,alt:this.props.tags,onLoad:this.handleImageLoad})))}}]),a}(n.Component),R=function(e){function a(){return Object(o.a)(this,a),Object(h.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this.props.isVisible?"block":"none";return s.a.createElement("div",{className:"loader",style:{display:e},id:"loader-rect-rv2"},s.a.createElement("div",{className:"rect-rv2"}),s.a.createElement("div",{className:"rect-rv2"}),s.a.createElement("div",{className:"rect-rv2"}),s.a.createElement("div",{className:"rect-rv2"}),s.a.createElement("div",{className:"rect-rv2"}))}}]),a}(n.Component),E=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(m.a)(a).call(this,e))).state={imageIsLoaded:!1},t.imageURL=e.userImageURL,t.handleImageLoad=t.handleImageLoad.bind(Object(u.a)(Object(u.a)(t))),t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"handleImageLoad",value:function(){this.setState({imageIsLoaded:!0})}},{key:"componentWillReceiveProps",value:function(e){e.userImageURL!==this.imageURL&&(this.imageURL=e.userImageURL,this.setState(function(e){return{imageIsLoaded:!1}}))}},{key:"render",value:function(){var e=this.state.imageIsLoaded?"visible":"hidden";return s.a.createElement("div",{className:"user-info"},s.a.createElement("img",{className:"user-image",style:{visibility:e},src:this.props.userImageURL,alt:this.props.userName,onLoad:this.handleImageLoad}),s.a.createElement("span",{className:"user-name"},this.props.userName))}}]),a}(n.Component),N=function(e){function a(){return Object(o.a)(this,a),Object(h.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this.props.tagsString.split(",");return e=e.map(function(e,a){return s.a.createElement("span",{key:a,className:"badge badge-light mr-2"},e.trim())}),s.a.createElement("div",{className:"tags"},e)}}]),a}(n.Component),k=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(m.a)(a).call(this,e))).handleReviewClosing=t.handleReviewClosing.bind(Object(u.a)(Object(u.a)(t))),t.handleImageLoad=t.handleImageLoad.bind(Object(u.a)(Object(u.a)(t))),t.imageURL=e.url,t.state={imageIsLoaded:!1},t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"handleReviewClosing",value:function(){this.props.handleReviewClosing()}},{key:"handleImageLoad",value:function(){this.setState({imageIsLoaded:!0})}},{key:"componentWillReceiveProps",value:function(e){e.url!==this.imageURL&&(this.imageURL=e.url,this.setState({imageIsLoaded:!1}))}},{key:"render",value:function(){var e,a,t,n,i=this.props.isVisible?"block":"none",r=this.state.imageIsLoaded?"block":"none";return this.props.imageData&&(e=s.a.createElement(E,{userImageURL:this.props.imageData.userImageURL,userName:this.props.imageData.user}),a=s.a.createElement(N,{tagsString:this.props.imageData.tags}),t=s.a.createElement("span",{className:"resolution"},"".concat(this.props.imageData.imageWidth," \xd7 ").concat(this.props.imageData.imageHeight)),n=s.a.createElement("a",{target:"_blank",className:"btn btn-outline-light",href:this.props.imageData.pageURL},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043d\u0430 pixabay.com")),s.a.createElement("div",{className:"img-review",style:{display:i}},s.a.createElement("div",{className:"img-review-body"},s.a.createElement("button",{type:"button",className:"img-review-close-btn",onClick:this.handleReviewClosing},s.a.createElement("span",{"aria-hidden":"true"},"\xd7")),s.a.createElement("div",{className:"img-view"},s.a.createElement("img",{src:this.props.url,style:{display:r},alt:this.props.tags,className:"review-image img-fluid",onLoad:this.handleImageLoad})),s.a.createElement("div",{className:"img-info"},s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"row mb-3"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("h5",{className:"img-info-row-title"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c:"),e)),s.a.createElement("div",{className:"row mb-3"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("h5",{className:"img-info-row-title"},"\u0422\u0435\u0433\u0438:"),a)),s.a.createElement("div",{className:"row mb-3"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("h5",{className:"img-info-row-title"},"\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435:"),t)),s.a.createElement("div",{className:"row pb-3"},s.a.createElement("div",{className:"col-md-12"},n))))))}}]),a}(n.Component),q=["\u041f\u043e\u0440\u044f\u0434\u043e\u043a","\u0422\u0438\u043f","\u041e\u0440\u0438\u0435\u043d\u0442\u0430\u0446\u0438\u044f","\u041a\u0430\u0442\u0438\u0433\u043e\u0440\u0438\u044f"],C={popular:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0435",latest:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435"},L={all:"\u0412\u0441\u0435",photo:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438",illustration:"\u0418\u043b\u044e\u0441\u0442\u0440\u0430\u0446\u0438\u0438",vector:"\u0412\u0435\u043a\u0442\u043e\u0440\u043d\u0430\u044f \u0433\u0440\u0430\u0444\u0438\u043a\u0430"},P={all:"\u041b\u044e\u0431\u0430\u044f",horizontal:"\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u0430\u044f",vertical:"\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u0430\u044f"},S={all:"\u0412\u0441\u0435",nature:"\u041f\u0440\u0438\u0440\u043e\u0434\u0430",animals:"\u0416\u0438\u0432\u043e\u0442\u043d\u044b\u0435",music:"\u041c\u0443\u0437\u044b\u043a\u0430",sports:"\u0421\u043f\u043e\u0440\u0442",travel:"\u041f\u0443\u0442\u0435\u0448\u0435\u0442\u0432\u0438\u044f",business:"\u0411\u0438\u0437\u043d\u0435\u0441",religion:"\u0420\u0435\u043b\u0438\u0433\u0438\u044f",science:"\u041d\u0430\u0443\u043a\u0430",places:"\u041c\u0435\u0441\u0442\u0430",buildings:"\u0421\u0442\u0440\u043e\u0435\u043d\u0438\u044f",transportation:"\u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442"},W=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(m.a)(a).call(this,e))).loadedImagesCount=0,t.imagesProps=[],t.minHeight=b()(window).height(),t.state={requestParams:{key:"7775574-3025f5a4e25df18f8739c96bc",q:"",image_type:"all",orientation:"all",category:"all",safesearch:!1,page:1,order:"popular",per_page:20},requestedImages:[],imagesLoaded:!1,isReadySendRequest:!0,isReviewOpened:!1,imageReview:{url:null,imageData:null}},t.sendRequest=t.sendRequest.bind(Object(u.a)(Object(u.a)(t))),t.setRequestParam=t.setRequestParam.bind(Object(u.a)(Object(u.a)(t))),t.handleImageLoad=t.handleImageLoad.bind(Object(u.a)(Object(u.a)(t))),t.handleRequest=t.handleRequest.bind(Object(u.a)(Object(u.a)(t))),t.handleImageReview=t.handleImageReview.bind(Object(u.a)(Object(u.a)(t))),t.handleReviewClosing=t.handleReviewClosing.bind(Object(u.a)(Object(u.a)(t))),t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"sendRequest",value:function(){var e=this;this.setState({isReadySendRequest:!1}),b.a.get("https://pixabay.com/api/",this.state.requestParams).done(function(a){e.setState(function(e){return p()(e,{requestedImages:{$push:a.hits}})})}).fail(function(e){return alert(e)})}},{key:"setRequestParam",value:function(e,a){this.setState(function(t){return p()(t,{requestParams:Object(l.a)({},e,{$set:a})})})}},{key:"componentDidMount",value:function(){var e=this;this.sendRequest(),this.containerWidth=b()("body").innerWidth(),b()(window).resize(function(){e.containerWidth=b()("body").innerWidth(),e.handleContainerResize()}).scroll(function(){b()(window).scrollTop()>=b()("body").height()-2*b()(window).height()&&e.state.isReadySendRequest&&(e.setState(function(e){var a=e.requestParams.page+1;return p()(e,{requestParams:{page:{$set:a}}})}),e.sendRequest())}),this.loadedImagesCount=0}},{key:"handleRequest",value:function(){this.imagesProps=[],this.setState(function(e){return p()(e,{requestedImages:{$set:[]},requestParams:{page:{$set:1}}})},this.sendRequest),this.containerWidth<992&&b()(".navbar-toggler").trigger("click")}},{key:"calculateImageProps",value:function(e){for(var a,t,n=0,s=[],i=[],r=0,l=this.containerWidth,o=0;o<e.length;o++)if(s.push(e[o]),(n+=e[o].originalWidth)>l){for(var c=0;c<s.length;c++)a=(t=l/(n/340))*(s[c].originalWidth/s[c].originalHeight),r+=parseFloat("0."+a.toString().split(".")[1]),a=Math.floor(a),c===s.length-1&&(a+=r=+r.toFixed(),r=0),i.push({calculatedHeight:t,calculatedWidth:a,isVisible:!0});s=[],n=0}return s.forEach(function(e){i.push({calculatedWidth:"",calculatedHeight:"",isVisible:!0})}),i}},{key:"handleContainerResize",value:function(){var e=this;this.calculatedImagesProps=this.calculateImageProps(this.imagesProps),this.setState(function(a){for(var t=p()(a,{requestedImages:{0:{$merge:e.calculatedImagesProps[0]}}}),n=1;n<a.requestedImages.length;n++)t=p()(t,{requestedImages:Object(l.a)({},n,{$merge:e.calculatedImagesProps[n]})});return t})}},{key:"handleImageLoad",value:function(e,a,t,n){var s=this;this.imagesProps[e]={originalWidth:a,originalHeight:t,isVisible:n},++this.loadedImagesCount===this.state.requestParams.per_page&&(this.calculatedImagesProps=this.calculateImageProps(this.imagesProps),this.setState(function(e){for(var a=p()(e,{requestedImages:{0:{$merge:s.calculatedImagesProps[0]}},isReadySendRequest:{$set:!0}}),t=1;t<e.requestedImages.length;t++)a=p()(a,{requestedImages:Object(l.a)({},t,{$merge:s.calculatedImagesProps[t]})});return a}),this.loadedImagesCount=0)}},{key:"handleImageReview",value:function(e,a){this.setState({isReviewOpened:!0,imageReview:{url:e,imageData:a}})}},{key:"handleReviewClosing",value:function(){this.setState({isReviewOpened:!1})}},{key:"render",value:function(){for(var e=[],a=0;a<this.state.requestedImages.length;a++){var t=this.state.requestedImages[a].webformatURL.replace("_640","_340"),n=this.state.requestedImages[a].webformatURL.replace("_640","_960");this.state.requestedImages[a].isVisible?e.push(s.a.createElement(I,{index:a,isVisible:!0,reviewURL:n,imageData:this.state.requestedImages[a],key:this.state.requestedImages.id,width:this.state.requestedImages[a].calculatedWidth,height:this.state.requestedImages[a].calculatedHeight,handleImageLoad:this.handleImageLoad,handleImageReview:this.handleImageReview,alt:this.state.requestedImages[a].tags,url:t})):e.push(s.a.createElement(I,{index:a,key:this.state.requestedImages.id,handleImageLoad:this.handleImageLoad,url:t}))}return s.a.createElement(s.a.Fragment,null,s.a.createElement(f,null,s.a.createElement(w,{dropdownTitles:q},s.a.createElement(j,{handleChange:this.setRequestParam,paramName:"order",items:C,val:this.state.requestParams.order}),s.a.createElement(j,{handleChange:this.setRequestParam,paramName:"image_type",items:L,val:this.state.requestParams.image_type}),s.a.createElement(j,{handleChange:this.setRequestParam,paramName:"orientation",items:P,val:this.state.requestParams.orientation}),s.a.createElement(j,{handleChange:this.setRequestParam,paramName:"category",items:S,val:this.state.requestParams.category})),s.a.createElement(y,{val:this.state.requestParams.safesearch,paramName:"safesearch",text:"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0439 \u043f\u043e\u0438\u0441\u043a",hint:"\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u044e\u0449\u0438\u0435 \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u043d\u043e\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435",_id:"safeCheckbox",handleChange:this.setRequestParam}),s.a.createElement(O,{val:this.state.requestParams.q,paramName:"q",handleChange:this.setRequestParam,handleSearch:this.handleRequest})),s.a.createElement("div",{className:"img-container clearfix",style:{minHeight:this.minHeight}},e,s.a.createElement(R,{isVisible:!this.state.isReadySendRequest})),s.a.createElement(k,{url:this.state.imageReview.url,imageData:this.state.imageReview.imageData,handleReviewClosing:this.handleReviewClosing,isVisible:this.state.isReviewOpened}))}}]),a}(n.Component),U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(s.a.createElement(W,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/imgo",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/imgo","/service-worker.js");U?(function(e){fetch(e).then(function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):x(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):x(e)})}}()}},[[14,2,1]]]);
//# sourceMappingURL=main.3d8cff0a.chunk.js.map